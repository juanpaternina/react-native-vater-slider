1. Fix small bug color in the bar.
2. Add some throttling on color change.
3. Write some tests.
